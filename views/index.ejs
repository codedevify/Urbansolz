<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Urban Solz</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* ==== RESET & TYPOGRAPHY ==== */
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Inter',sans-serif;
  background:#faf9f7;
  color:#2d1e12;
  line-height:1.7;
  overflow-x:hidden;
  scroll-behavior:smooth;
}
h1,h2,h3,h4{font-family:'Playfair Display',serif;font-weight:700;}
a{text-decoration:none;color:inherit;}

/* ==== HEADER ==== */
header{
  position:fixed;top:0;left:0;width:100%;
  background:rgba(255,255,255,0.94);
  backdrop-filter:blur(12px);
  z-index:1000;
  padding:1rem 5%;
  display:flex;justify-content:space-between;align-items:center;
  box-shadow:0 2px 15px rgba(0,0,0,0.06);
  transition:box-shadow .3s;
}
header.scrolled{box-shadow:0 4px 25px rgba(0,0,0,0.1);}
.logo{font-size:1.9rem;font-weight:700;letter-spacing:1.2px;color:#2d1e12;}
nav.desktop a{
  margin-left:2.2rem;font-weight:500;font-size:.95rem;
  color:#5d4037;letter-spacing:.5px;position:relative;
  transition:color .3s;cursor:pointer;
}
nav.desktop a::after{
  content:"";position:absolute;bottom:-6px;left:0;width:0;height:1.5px;
  background:#a1887f;transition:width .3s;
}
nav.desktop a:hover{color:#a1887f;}
nav.desktop a:hover::after{width:100%;}
nav.desktop a.active{color:#a1887f;}
nav.desktop a.active::after{width:100%;}

/* ==== SEARCH ==== */
.search-container{position:relative;max-width:300px;width:100%;}
.search-wrapper{position:relative;}
.search-input{
  width:100%;padding:10px 45px 10px 15px;
  border:1px solid #ddd;border-radius:30px;font-size:.95rem;
  background:#fff;transition:all .3s;outline:none;
}
.search-input:focus{border-color:#a1887f;box-shadow:0 0 0 3px rgba(161,136,127,.15);}
.search-btn{
  position:absolute;right:5px;top:50%;transform:translateY(-50%);
  background:none;border:none;cursor:pointer;font-size:1.2rem;
  color:#8d6e63;transition:color .3s;
}
.search-btn:hover{color:#a1887f;}

/* Search Dropdown */
.search-dropdown{
  position:absolute;top:100%;left:0;width:100%;
  background:#fff;border-radius:12px;margin-top:8px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);max-height:320px;
  overflow-y:auto;display:none;z-index:999;
}
.search-dropdown.active{display:block;}
.search-item{
  padding:12px 16px;border-bottom:1px solid #eee;cursor:pointer;
  transition:background .2s;
}
.search-item:hover{background:#f9f5f2;}
.search-item strong{font-weight:600;}
.search-item small{color:#8d6e63;font-size:.85rem;display:block;}

/* ==== MOBILE NAV ICONS ==== */
.mobile-nav-icons{
  display:flex;gap:1rem;align-items:center;
}
.cart-icon{
  font-size:1.4rem;color:#2d1e12;position:relative;cursor:pointer;
}
.cart-count{
  position:absolute;top:-6px;right:-10px;
  background:#a1887f;color:#fff;font-size:.65rem;
  width:16px;height:16px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-weight:600;
}
.hamburger{
  display:none;cursor:pointer;z-index:1001;
}
.hamburger span{
  display:block;width:24px;height:2px;background:#2d1e12;
  margin:5px 0;transition:all .3s;
}
.hamburger.active span:nth-child(1){transform:rotate(45deg) translate(6px,6px);}
.hamburger.active span:nth-child(2){opacity:0;}
.hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-7px);}

/* ==== MOBILE MENU ==== */
.mobile-menu{
  position:fixed;top:0;right:-100%;width:100%;max-width:320px;height:100vh;
  background:#fff;padding:6rem 2rem 2rem;transition:right .4s ease;
  box-shadow:-10px 0 30px rgba(0,0,0,.1);z-index:1000;
}
.mobile-menu.active{right:0;}
.mobile-menu .close-btn{
  position:absolute;top:1.5rem;right:1.5rem;font-size:1.8rem;
  cursor:pointer;color:#999;transition:color .3s;
}
.mobile-menu .close-btn:hover{color:#2d1e12;}
.mobile-menu a{
  display:block;padding:1rem 0;font-size:1.1rem;
  font-weight:500;color:#5d4037;border-bottom:1px solid #eee;
  transition:color .3s;cursor:pointer;
}
.mobile-menu a:last-child{border-bottom:none;}
.mobile-menu a:hover{color:#a1887f;}
.mobile-menu a.active{color:#a1887f;font-weight:600;}

/* ==== HERO (WHITE TEXT) ==== */
.hero{
  min-height:100vh;display:flex;align-items:center;justify-content:center;
  text-align:center;position:relative;overflow:hidden;
  padding:120px 5% 80px;
}
.hero::before{
  content:"";position:absolute;top:0;left:0;width:100%;height:100%;
  background:url('https://raw.githubusercontent.com/codedevify/Urban_solz/refs/heads/main/09d7da4b-ea63-4b5c-9a80-8359c56c4a84.jpg') center/cover no-repeat;
  filter:blur(2px) brightness(0.7);
  z-index:-1;
}
.hero-content{max-width:900px;color:#ffffff !important;}
.hero h1{
  font-size:4.2rem;line-height:1.1;margin-bottom:1.5rem;
  color:#ffffff;letter-spacing:-1.5px;text-shadow:0 2px 10px rgba(0,0,0,0.3);
}
.hero p{
  font-size:1.15rem;color:#f0f0f0;margin-bottom:2.5rem;
  max-width:600px;margin-left:auto;margin-right:auto;
  text-shadow:0 1px 5px rgba(0,0,0,0.2);
}
.hero button{
  background:#ffffff;color:#2d1e12;border:none;
  padding:15px 45px;font-size:1rem;font-weight:600;
  border-radius:50px;cursor:pointer;transition:all .3s;
  box-shadow:0 6px 20px rgba(0,0,0,.3);
}
.hero button:hover{
  background:#a1887f;color:#fff;transform:translateY(-3px);
  box-shadow:0 12px 30px rgba(0,0,0,.4);
}

/* ==== SECTIONS (for scroll) ==== */
section{padding-top:80px;}

/* ==== PRODUCTS ==== */
.products-section{padding:100px 5%;text-align:center;position:relative;z-index:1;}
.products-section h2{font-size:2.6rem;margin-bottom:1rem;color:#2d1e12;}
.products-section p{
  color:#8d6e63;margin-bottom:3rem;max-width:700px;
  margin-left:auto;margin-right:auto;
}
.no-results{
  text-align:center;color:#8d6e63;font-size:1.1rem;margin-top:2rem;
  display:none;
}

/* Fixed height cards + ellipsis + visible button */
.product-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:2rem;max-width:1400px;margin:0 auto;
}
@media(max-width:640px){
  .product-grid{grid-template-columns:repeat(2,1fr);gap:1.2rem;}
}
.product-card{
  background:#fff;border-radius:16px;overflow:hidden;
  box-shadow:0 8px 25px rgba(0,0,0,.06);
  opacity:0;transform:translateY(30px);
  transition:all .6s ease;cursor:pointer;
  height:360px;display:flex;flex-direction:column;
}
@media(max-width:640px){
  .product-card{height:380px !important;}
}
.product-card.visible{opacity:1;transform:translateY(0);}
.product-card:hover{
  transform:translateY(-8px);box-shadow:0 16px 35px rgba(0,0,0,.12);
}
.product-card img{
  width:100%;height:160px;object-fit:cover;
  transition:transform .5s;
}
.product-card:hover img{transform:scale(1.06);}
.product-info{
  padding:1rem;text-align:center;flex-grow:1;display:flex;flex-direction:column;
}
.product-info h3{
  font-size:1.15rem;margin-bottom:.4rem;color:#2d1e12;
}
.product-info p{
  font-size:.88rem;color:#8d6e63;margin-bottom:.8rem;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;
  overflow:hidden;text-overflow:ellipsis;flex-grow:1;
}
.product-info strong{
  display:block;margin: .6rem 0 .8rem;font-size:1.05rem;color:#2d1e12;
}
.product-card .add-btn{
  background:#2d1e12;color:#fff;border:none;
  padding:10px 20px;border-radius:50px;font-size:.9rem;
  cursor:pointer;transition:all .3s;font-weight:500;width:100%;
}
.product-card .add-btn:hover{
  background:#a1887f;transform:scale(1.02);
}

/* ==== ABOUT & CONTACT (BOTTOM) ==== */
.bottom-section{
  padding:80px 5%;text-align:center;background:#f9f5f2;
}
.bottom-section h2{
  font-size:2.4rem;margin-bottom:1rem;color:#2d1e12;
}
.bottom-section p{
  color:#8d6e63;max-width:700px;margin:0 auto 1.5rem;
  font-size:1.05rem;
}
.bottom-section a{
  color:#a1887f;font-weight:600;
}

/* ==== MODAL ==== */
.modal{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.7);z-index:2000;align-items:center;justify-content:center;
  padding:2rem;overflow-y:auto;
}
.modal.active{display:flex;}
.modal-content{
  background:#fff;max-width:600px;width:100%;max-height:88vh;
  border-radius:20px;overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
  animation:modalFade .4s ease;
  display:flex;flex-direction:column;
}
@keyframes modalFade{from{opacity:0;transform:scale(.92);}to{opacity:1;transform:scale(1);}}
.modal-img img{
  width:100%;height:260px;object-fit:cover;
}
.modal-body{
  padding:1.8rem;text-align:center;flex-grow:1;
}
.modal-body h3{
  font-size:1.8rem;margin-bottom:.6rem;color:#2d1e12;
}
.modal-body p{
  font-size:.95rem;color:#5d4037;margin-bottom:1rem;line-height:1.6;
}
.modal-body strong{
  display:block;font-size:1.5rem;margin-bottom:1.2rem;color:#2d1e12;
}
.modal-body select{
  width:100%;padding:10px;margin-bottom:1rem;border:1px solid #ddd;border-radius:8px;
}
.modal-body button{
  background:#2d1e12;color:#fff;border:none;
  padding:11px 32px;border-radius:50px;font-size:.95rem;
  cursor:pointer;transition:all .3s;
}
.modal-body button:hover{
  background:#a1887f;transform:scale(1.05);
}
.modal-close{
  position:absolute;top:1rem;right:1rem;
  background:none;border:none;font-size:1.8rem;
  color:#999;cursor:pointer;transition:color .3s;z-index:10;
}
.modal-close:hover{color:#2d1e12;}

/* ==== FOOTER ==== */
footer{
  background:#2d1e12;color:#e8e0d8;padding:80px 5% 40px;
  font-size:.95rem;position:relative;z-index:1;
}
.footer-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:3rem;max-width:1400px;margin:0 auto 3rem;
}
.footer-col h4{
  color:#fff;font-size:1.3rem;margin-bottom:1rem;
  font-family:'Playfair Display',serif;
}
.footer-col a,.footer-col p{
  display:block;color:#d7c4a3;margin-bottom:.8rem;
  transition:color .3s;
}
.footer-col a:hover{color:#fff;}
.socials a{
  font-size:1.3rem;margin-right:1rem;color:#d7c4a3;
  transition:transform .3s,color .3s;
}
.socials a:hover{color:#fff;transform:translateY(-3px);}
.footer-bottom{
  border-top:1px solid rgba(255,255,250,.1);
  padding-top:1.5rem;text-align:center;
  color:#b39e85;font-size:.85rem;
}

/* ==== RESPONSIVE ==== */
@media(max-width:992px){
  .hero h1{font-size:3.5rem;}
  .search-container{max-width:250px;}
}
@media(max-width:768px){
  .hamburger{display:block;}
  nav.desktop,.search-container{display:none;}
  .mobile-nav-icons{display:flex;}
  .hero{padding:140px 5% 80px;}
  .hero h1{font-size:3rem;}
}
@media(max-width:480px){
  .hero h1{font-size:2.4rem;}
  .hero button{padding:12px 32px;}
  .products-section h2{font-size:2rem;}
}
</style>
</head>
<body>

<!-- HEADER -->
<header id="header">
  <div class="logo">Urban Solz</div>
  <nav class="desktop">
    <a onclick="scrollToSection('hero')">Home</a>
    <a onclick="scrollToSection('products-section')">Shop</a>
    <a onclick="scrollToSection('about')">About</a>
    <a onclick="scrollToSection('contact')">Contact</a>
    <a href="/cart">Cart (<%= (cart || []).reduce((s,i)=>s+i.quantity,0) %>)</a>
    <a href="/admin/login">Admin</a>
  </nav>

  <!-- Desktop Search -->
  <div class="search-container">
    <div class="search-wrapper">
      <input type="text" class="search-input" id="searchInput" placeholder="Search shoes, accessories..." autocomplete="off">
      <button class="search-btn">Search</button>
      <div class="search-dropdown" id="searchDropdown"></div>
    </div>
  </div>

  <!-- Mobile Icons -->
  <div class="mobile-nav-icons">
    <a href="/cart" class="cart-icon">Cart<span class="cart-count"><%= (cart || []).reduce((s,i)=>s+i.quantity,0) %></span></a>
    <div class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>
  </div>
</header>

<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">
  <div class="close-btn" id="closeMenu">×</div>
  <a onclick="scrollToSection('hero'); closeMobileMenu()">Home</a>
  <a onclick="scrollToSection('products-section'); closeMobileMenu()">Shop</a>
  <a onclick="scrollToSection('about'); closeMobileMenu()">About</a>
  <a onclick="scrollToSection('contact'); closeMobileMenu()">Contact</a>
  <a href="/cart">Cart (<%= (cart || []).reduce((s,i)=>s+i.quantity,0) %>)</a>
  <a href="/admin/login">Admin</a>
  <input type="text" class="search-input" id="mobileSearch" placeholder="Search shoes, accessories..." style="margin:1rem 0;padding:12px 15px;border-radius:30px;border:1px solid #ddd;">
</div>

<!-- HERO -->
<section class="hero" id="hero">
  <div class="hero-content">
    <h1>Step Into Style</h1>
    <p>Urban Solz — casual footwear and accessories for everyday comfort and urban vibes.</p>
    <button onclick="scrollToSection('products-section')">Shop Collection</button>
  </div>
</section>

<!-- PRODUCTS -->
<section class="products-section" id="products-section">
  <h2>Our Collection</h2>
  <p>Discover comfy casual shoes and stylish accessories for your daily adventures.</p>
  <div id="noResults" class="no-results">No items found matching your search.</div>
  <div class="product-grid" id="productGrid">
    <% products.forEach(p => { %>
      <div class="product-card"
           data-name="<%= p.name.toLowerCase() %>"
           data-desc="<%= p.description.toLowerCase() %>"
           data-id="<%= p._id %>"
           data-img="<%= p.image %>"
           data-price="<%= p.price %>">
        <img src="<%= p.image %>" alt="<%= p.name %>">
        <div class="product-info">
          <h3><%= p.name %></h3>
          <p><%= p.description %></p>
          <strong>£<%= p.price %></strong>
          <!-- Add to Cart button now opens the modal -->
          <button class="add-btn" data-id="<%= p._id %>">Add to Cart</button>
        </div>
      </div>
    <% }) %>
  </div>
</section>

<!-- ABOUT (BOTTOM) -->
<section class="bottom-section" id="about">
  <h2>About Urban Solz</h2>
  <p>We bring you comfy casual footwear and accessories for everyday style. No fuss, just comfort and cool.</p>
  <p><a href="#">Learn More</a></p>
</section>

<!-- CONTACT (BOTTOM) -->
<section class="bottom-section" id="contact" style="background:#fff;">
  <h2>Get in Touch</h2>
  <p>We’d love to hear from you. Questions? Feedback? We’re here.</p>
  <p>Email: <a href="mailto:urbansole2025@hotmail.com">urbansole2025@hotmail.com</a> | <a href="https://wa.me/447356081778" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;color:#25D366;font-weight:600;text-decoration:none;gap:6px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="18" height="18" fill="currentColor" style="flex-shrink:0;"><path d="M476.9 161.1C435 119.1 379.2 96 319.9 96C197.5 96 97.9 195.6 97.9 318C97.9 357.1 108.1 395.3 127.5 429L96 544L213.7 513.1C246.1 530.8 282.6 540.1 319.8 540.1L319.9 540.1C442.2 540.1 544 440.5 544 318.1C544 258.8 518.8 203.1 476.9 161.1zM319.9 502.7C286.7 502.7 254.2 493.8 225.9 477L219.2 473L149.4 491.3L168 423.2L163.6 416.2C145.1 386.8 135.4 352.9 135.4 318C135.4 216.3 218.2 133.5 320 133.5C369.3 133.5 415.6 152.7 450.4 187.6C485.2 222.5 506.6 268.8 506.5 318.1C506.5 419.9 421.6 502.7 319.9 502.7zM421.1 364.5C415.6 361.7 388.3 348.3 383.2 346.5C378.1 344.6 374.4 343.7 370.7 349.3C367 354.9 356.4 367.3 353.1 371.1C349.9 374.8 346.6 375.3 341.1 372.5C308.5 356.2 287.1 343.4 265.6 306.5C259.9 296.7 271.3 297.4 281.9 276.2C283.7 272.5 282.8 269.3 281.4 266.5C280 263.7 268.9 236.4 264.3 225.3C259.8 214.5 255.2 216 251.8 215.8C248.6 215.6 244.9 215.6 241.2 215.6C237.5 215.6 231.5 217 226.4 222.5C221.3 228.1 207 241.5 207 268.8C207 296.1 226.9 322.5 229.6 326.2C232.4 329.9 268.7 385.9 324.4 410C359.6 425.2 373.4 426.5 391 423.9C401.7 422.3 423.8 410.5 428.4 397.5C433 384.5 433 373.4 431.6 371.1C430.3 368.6 426.6 367.2 421.1 364.5z"/></svg>+44 7356 081778</a></p>
</section>

<!-- MODAL -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <button class="modal-close" id="modalClose">×</button>
    <div class="modal-img"><img id="modalImg" src="" alt=""></div>
    <div class="modal-body">
      <h3 id="modalName"></h3>
      <p id="modalDesc"></p>
      <strong id="modalPrice"></strong>
      <form id="modalForm" action="" method="POST">
        <select name="size" required>
          <option value="">Select Size</option>
          <% for(let s=3; s<=8; s++) { %>
            <option value="<%= s %>">UK <%= s %></option>
          <% } %>
        </select>
        <button type="submit">Add to Cart</button>
      </form>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Urban Solz</h4>
      <p>Casual footwear and accessories. Everyday comfort, urban style.</p>
    </div>
    <div class="footer-col">
      <h4>Shop</h4>
      <a onclick="scrollToSection('products-section')">Shoes</a>
      <a onclick="scrollToSection('products-section')">Accessories</a>
      <a onclick="scrollToSection('products-section')">New Arrivals</a>
    </div>
    <div class="footer-col">
      <h4>Support</h4>
      <a onclick="scrollToSection('contact')">Contact Us</a>
      <a href="/#">Shipping & Returns</a>
      <a href="/#">Privacy Policy</a>
    </div>
    <div class="footer-col">
      <h4>Connect</h4>
      <div class="socials">
        <a href="https://instagram.com/urban_solz" target="_blank">Instagram</a>
        <a href="https://tiktok.com" target="_blank">TikTok</a>
        <a href="#" target="_blank">Pinterest</a>
        <a href="https://facebook.com/UrbanSolz" target="_blank">Facebook</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    &copy; <%= new Date().getFullYear() %> Urban Solz. All Rights Reserved.
  </div>
</footer>

<script>
/* ==== SCROLL TO SECTION ==== */
function scrollToSection(id) {
  const el = document.getElementById(id);
  if (el) {
    const offset = 80;
    const top = el.getBoundingClientRect().top + window.pageYOffset - offset;
    window.scrollTo({ top, behavior: 'smooth' });
  }
  closeMobileMenu();
}
function closeMobileMenu() {
  document.getElementById('hamburger').classList.remove('active');
  document.getElementById('mobileMenu').classList.remove('active');
}

/* ==== SCROLL REVEAL ==== */
const cards = document.querySelectorAll('.product-card');
const reveal = () => {
  const trigger = window.innerHeight * 0.85;
  cards.forEach(c => { if (c.getBoundingClientRect().top < trigger) c.classList.add('visible'); });
};
window.addEventListener('scroll', reveal); reveal();

/* ==== HEADER SCROLL ==== */
const header = document.getElementById('header');
window.addEventListener('scroll', () => header.classList.toggle('scrolled', window.scrollY > 50));

/* ==== MOBILE MENU ==== */
const hamburger = document.getElementById('hamburger');
const mobileMenu = document.getElementById('mobileMenu');
const closeMenu = document.getElementById('closeMenu');

hamburger.addEventListener('click', (e) => {
  e.stopPropagation();
  hamburger.classList.toggle('active');
  mobileMenu.classList.toggle('active');
});
closeMenu.addEventListener('click', closeMobileMenu);
document.addEventListener('click', (e) => {
  if (mobileMenu.classList.contains('active') && 
      !mobileMenu.contains(e.target) && 
      !hamburger.contains(e.target)) {
    closeMobileMenu();
  }
});

/* ==== LIVE SEARCH ==== */
const searchInput = document.getElementById('searchInput');
const mobileSearch = document.getElementById('mobileSearch');
const dropdown = document.getElementById('searchDropdown');
const noResults = document.getElementById('noResults');
const allCards = Array.from(document.querySelectorAll('.product-card'));

function filterProducts(query) {
  const q = query.toLowerCase().trim();
  let visible = 0;
  let suggestions = [];

  allCards.forEach(card => {
    const name = card.dataset.name;
    const desc = card.dataset.desc;
    const matches = name.includes(q) || desc.includes(q);
    card.style.display = matches ? 'block' : 'none';
    if (matches && q !== '' && suggestions.length < 6) {
      suggestions.push({ 
        name: card.querySelector('h3').textContent, 
        price: card.querySelector('strong').textContent,
        id: card.dataset.id
      });
    }
    if (matches) visible++;
  });

  noResults.style.display = (visible === 0 && q !== '') ? 'block' : 'none';

  if (q === '') {
    dropdown.classList.remove('active');
    dropdown.innerHTML = '';
  } else {
    dropdown.innerHTML = suggestions.map(s => `
      <div class="search-item" data-id="${s.id}">
        <strong>${s.name}</strong>
        <small>${s.price}</small>
      </div>
    `).join('');
    dropdown.classList.toggle('active', suggestions.length > 0);
  }
}

[searchInput, mobileSearch].forEach(input => {
  if (input) {
    input.addEventListener('input', (e) => filterProducts(e.target.value));
    input.addEventListener('focus', () => { if (input.value) filterProducts(input.value); });
  }
});

document.querySelector('.search-btn')?.addEventListener('click', () => filterProducts(searchInput.value));

/* ==== MODAL ==== */
const modal = document.getElementById('productModal');
const modalClose = document.getElementById('modalClose');
const modalImg = document.getElementById('modalImg');
const modalName = document.getElementById('modalName');
const modalDesc = document.getElementById('modalDesc');
const modalPrice = document.getElementById('modalPrice');
const modalForm = document.getElementById('modalForm');

function openModal(card) {
  modalImg.src = card.dataset.img;
  modalName.textContent = card.querySelector('h3').textContent;
  modalDesc.textContent = card.querySelector('p').textContent;
  modalPrice.textContent = card.querySelector('strong').textContent;
  modalForm.action = `/add-to-cart/${card.dataset.id}`;
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

/* Open modal when whole card is clicked */
document.querySelectorAll('.product-card').forEach(card => {
  card.addEventListener('click', (e) => {
    // ignore clicks on the button itself – it will be handled below
    if (e.target.classList.contains('add-btn')) return;
    openModal(card);
  });
});

/* Open modal when Add to Cart button is clicked */
document.querySelectorAll('.add-btn').forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.stopPropagation();               // prevent card click
    const card = btn.closest('.product-card');
    openModal(card);
  });
});

modalClose.addEventListener('click', closeModal);
modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
window.addEventListener('scroll', () => { if (modal.classList.contains('active')) closeModal(); });

function closeModal() {
  modal.classList.remove('active');
  document.body.style.overflow = 'auto';
}

/* Search dropdown click opens modal */
dropdown.addEventListener('click', (e) => {
  const item = e.target.closest('.search-item');
  if (item) {
    const id = item.dataset.id;
    const card = document.querySelector(`.product-card[data-id="${id}"]`);
    if (card) openModal(card);
  }
});
</script>
</body>
</html>